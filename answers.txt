package finitestatemachine;

import java.io.File;
import java.io.IOException;
import java.util.Scanner;



public class FiniteStateMachine {

    private static String transition(String previousInput, String currentInput) {
        String newState = "";
        if ((previousInput.equals("LU") && currentInput.equals("C"))) {
            newState = previousInput + currentInput;
            return newState;
        }
        if ((previousInput.equals("") && currentInput.equals("L"))) {
            newState = previousInput + currentInput;
            return newState;
        }
        if ((previousInput.equals("L") && currentInput.equals("U"))) {
            newState = previousInput + currentInput;
            return newState;
        }
        return "Error";
    }

    // method for readin data from csv
    public static String[][] readTransitionFromCSV() throws IOException  {
        String transitions[][] = new String[1][4];
            Scanner sc = new Scanner(new File("transitions.csv"));
            int i = 0;
            while (sc.hasNext()) {
                transitions[i] = sc.nextLine().split(",");
            }
       
        return transitions;
    }

    public static void main(String[] args) throws IOException {
        
        Scanner scan = new Scanner(System.in);
        
        String transitions[][] = readTransitionFromCSV();
        int attempts = 5;
        int i = 0, j = 0;
        while (true) {
            if (attempts < 1) {
                System.out.println("Iâ€™ll tell you: it is LUC");
                break;
            }
            String previousInput = transitions[i][j];
            System.out.print("What is Chicago's Jesuit university? ");
            String currentInput = scan.next();
            String newState = transition(previousInput, currentInput);
            if (newState.equals("Error")) {
                System.out.println("Sorry, try again: ");
            } else {
                System.out.println("new State is: " + newState);
                System.out.println("Enter next State: ");
                if (j == 2) {
                    System.out.println("Correct:");
                    break;
                }
                j++;
            }
            attempts--;
        }

    }

}
